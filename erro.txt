SaÃ­da do console
Download

Copy
View as plain text
Started by user noname_sistemas
Obtained Jenkinsfile from git https://github.com/danielcasanova12/docker-topicos
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /var/jenkins_home/workspace/noname_sistemas
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
The recommended git tool is: git
No credentials specified
Cloning the remote Git repository
Cloning repository https://github.com/danielcasanova12/docker-topicos
 > git init /var/jenkins_home/workspace/noname_sistemas # timeout=10
Fetching upstream changes from https://github.com/danielcasanova12/docker-topicos
 > git --version # timeout=10
 > git --version # 'git version 2.39.5'
 > git fetch --tags --force --progress -- https://github.com/danielcasanova12/docker-topicos +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git config remote.origin.url https://github.com/danielcasanova12/docker-topicos # timeout=10
 > git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
Avoid second fetch
 > git rev-parse refs/remotes/origin/main^{commit} # timeout=10
Checking out Revision e207d51d999654d3e30faec0f5a214ea9d213a96 (refs/remotes/origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f e207d51d999654d3e30faec0f5a214ea9d213a96 # timeout=10
Commit message: "ci/cd"
First time build. Skipping changelog.
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Checkout Code)
[Pipeline] echo
Checking out repository...
[Pipeline] git
The recommended git tool is: git
No credentials specified
 > git rev-parse --resolve-git-dir /var/jenkins_home/workspace/noname_sistemas/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/danielcasanova12/docker-topicos.git # timeout=10
Fetching upstream changes from https://github.com/danielcasanova12/docker-topicos.git
 > git --version # timeout=10
 > git --version # 'git version 2.39.5'
 > git fetch --tags --force --progress -- https://github.com/danielcasanova12/docker-topicos.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/main^{commit} # timeout=10
Checking out Revision e207d51d999654d3e30faec0f5a214ea9d213a96 (refs/remotes/origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f e207d51d999654d3e30faec0f5a214ea9d213a96 # timeout=10
 > git branch -a -v --no-abbrev # timeout=10
 > git checkout -b main e207d51d999654d3e30faec0f5a214ea9d213a96 # timeout=10
Commit message: "ci/cd"
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build and Deploy api1)
[Pipeline] script
[Pipeline] {
[Pipeline] echo
Building and deploying api1...
[Pipeline] sh
+ docker compose stop api1
time="2025-06-30T13:31:32Z" level=warning msg="/var/jenkins_home/workspace/noname_sistemas/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
[Pipeline] sh
+ docker compose rm -f api1
time="2025-06-30T13:31:32Z" level=warning msg="/var/jenkins_home/workspace/noname_sistemas/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
No stopped containers
[Pipeline] sh
+ docker rmi api1
Error response from daemon: No such image: api1:latest
+ true
[Pipeline] sh
+ docker compose build api1
time="2025-06-30T13:31:33Z" level=warning msg="/var/jenkins_home/workspace/noname_sistemas/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 423B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 2B done
#2 DONE 0.0s
failed to solve: failed to read dockerfile: open Dockerfile: no such file or directory
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build and Deploy orchard_api)
Stage "Build and Deploy orchard_api" skipped due to earlier failure(s)
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build and Deploy frontend)
Stage "Build and Deploy frontend" skipped due to earlier failure(s)
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] echo
Pipeline finished.
[Pipeline] mail
Error when executing always post condition:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Unknown Source)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(Unknown Source)
	at java.base/sun.nio.ch.NioSocketImpl.connect(Unknown Source)
	at java.base/java.net.SocksSocketImpl.connect(Unknown Source)
	at java.base/java.net.Socket.connect(Unknown Source)
	at PluginClassLoader for jakarta-mail-api//org.eclipse.angus.mail.util.SocketFetcher.createSocket(SocketFetcher.java:366)
	at PluginClassLoader for jakarta-mail-api//org.eclipse.angus.mail.util.SocketFetcher.getSocket(SocketFetcher.java:243)
	at PluginClassLoader for jakarta-mail-api//org.eclipse.angus.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2193)
Also:   org.jenkinsci.plugins.workflow.actions.ErrorAction$ErrorId: 2e01f29d-774d-4585-a602-9d94afa8d220
Caused: org.eclipse.angus.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused
	at PluginClassLoader for jakarta-mail-api//org.eclipse.angus.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2243)
	at PluginClassLoader for jakarta-mail-api//org.eclipse.angus.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:729)
	at PluginClassLoader for jakarta-mail-api//jakarta.mail.Service.connect(Service.java:345)
	at PluginClassLoader for jakarta-mail-api//jakarta.mail.Service.connect(Service.java:225)
	at PluginClassLoader for jakarta-mail-api//jakarta.mail.Service.connect(Service.java:174)
	at PluginClassLoader for jakarta-mail-api//jakarta.mail.Transport.send0(Transport.java:232)
	at PluginClassLoader for jakarta-mail-api//jakarta.mail.Transport.send(Transport.java:102)
	at PluginClassLoader for workflow-basic-steps//org.jenkinsci.plugins.workflow.steps.MailStep$MailStepExecution.run(MailStep.java:143)
	at PluginClassLoader for workflow-basic-steps//org.jenkinsci.plugins.workflow.steps.MailStep$MailStepExecution.run(MailStep.java:129)
	at PluginClassLoader for workflow-step-api//org.jenkinsci.plugins.workflow.steps.SynchronousNonBlockingStepExecution.lambda$start$0(SynchronousNonBlockingStepExecution.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

[Pipeline] echo
Build failed!
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
ERROR: script returned exit code 1
Finished: FAILURE