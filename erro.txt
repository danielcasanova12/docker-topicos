Criei um Jenkinsfile que roda todo o pipeline dentro de um container Docker (imagem oficial do Docker CLI), montando o socket do host para poder executar comandos docker sem precisar instalar nada no Jenkins host.

Ele faz:

Checkout do seu repositório

Build & Run de cada serviço (api1, orchard_api e frontend) em containers Docker novos

Gatilho diário às 2 h da manhã

Envio de e-mail ao final, tanto no sucesso quanto na falha

Você só precisa ajustar:

Seus paths de diretório (se differirem)

O e-mail em post { mail to: 'seu@e-mail.com', … }

Se usar registry, configurar REGISTRY e prefixar imagens

Esse Jenkinsfile dispensa a instalação de Docker na VM do Jenkins. Basta que o agente consiga puxar a imagem docker:24.0.2 e acesse /var/run/docker.sock.